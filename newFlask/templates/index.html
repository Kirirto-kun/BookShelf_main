<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Index</title>
</head>
<body>
    <h1>All Posts</h1>
    <a href="{{ url_for('create') }}">Create New Post</a>
    <a href="{{ url_for('liked_posts') }}">View Liked Posts</a>
    <a href="{{ url_for('logout') }}">Logout</a>
    <ul>
        {% for post in posts %}
            <li>
                <h2>{{ post.title }}</h2>
                <p>{{ post.text }}</p>
                {% if post.image_url %}
                    <img src="{{ post.image_url }}" alt="Post Image" style="max-width: 300px;"/>
                {% endif %}
                <p>By User: {{ post.username }}</p>
                <p>Created at: {{ post.created_at_str }}</p>
                <p>Likes: {{ post.likes_count }}</p> <!-- Display number of likes -->
                <!-- Link to the comments page for this post -->
                <a href="{{ url_for('comments', post_id=post.id) }}">Comments</a>
                <!-- Like button -->
                {% if post.id not in liked_posts %}
                    <form method="POST" action="{{ url_for('like_post', post_id=post.id) }}">
                        <button type="submit">Like</button>
                    </form>
                {% else %}
                    <button disabled>Liked</button>
                {% endif %}
            </li>
        {% endfor %}
    </ul>
</body>
</html>
