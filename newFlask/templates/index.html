<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Index</title>
</head>
<body>
    <h1>All Posts</h1>
    <a href="{{ url_for('create') }}">Create New Post</a>
    <a href="{{ url_for('liked_posts') }}">View Liked Posts</a>
    <a href="{{ url_for('communities') }}">Communities</a> <!-- Добавьте ссылку на сообщества -->
    <a href="{{ url_for('logout') }}">Logout</a>
    <ul>
        {% for post in posts %}
            <div class="post">
                <h3>{{ post.title }}</h3>
                <p>{{ post.content }}</p>
                {% if post.image_url %}
                    <img src="{{ post.image_url }}" alt="Post Image" style="max-width: 300px;"/>
                {% endif %}
                <p>By User: {{ post.username }}</p>
                <p>Created at: {{ post.created_at_str }}</p> <!-- Display post creation time -->
                <p>Likes: {{ post.likes_count }}</p>

                {% if post.id in liked_posts %}
                    <form action="{{ url_for('like_post', post_id=post.id) }}" method="POST">
                        <button type="submit">Unlike</button>
                    </form>
                {% else %}
                    <form action="{{ url_for('like_post', post_id=post.id) }}" method="POST">
                        <button type="submit">Like</button>
                    </form>
                {% endif %}
                <a href="{{ url_for('comments', post_id=post.id) }}">Comments</a>
            </div>
        {% endfor %}



    </ul>
</body>
</html>
